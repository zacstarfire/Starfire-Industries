/*
 # -----------------------------------------------------------------------------
 # ~/assets/themes/j1/modules/videojs/js/wt/wistia.min.js
 # Provides Wistia Playback Technology for Video.js V8 and newer
 # See: https://github.com/edly-io/videojs-wistia
 #
 #  Product/Info:
 #  http://jekyll.one
 #
  # Copyright (C) 2020-2021 Zia Fazal
 #  Copyright (C) 2023, 2024 Juergen Adams
 #
 #  J1 Theme is licensed under MIT License.
 #  See: https://github.com/jekyll-one/J1 Theme/blob/master/LICENSE
 #  See: https://wistia.com/support/developers/player-api
 # -----------------------------------------------------------------------------
*/

!function(e,t){if("object"==typeof exports&&"undefined"!=typeof module){var i=require("video.js");module.exports=t(i.default||i)}else"function"==typeof define&&define.amd?define(["videojs"],function(i){return e.Wistia=t(i)}):e.Wistia=t(e.videojs)}(this,function(e){"use strict";var t,i,s,a,r,o,n,l,d=e.browser.IS_IOS||e.browser.IS_NATIVE_ANDROID,u=e.getTech("Tech");class h extends u{constructor(e,t){super(e,t),this.setPoster(e.poster),this.setSrc(this.options_.source,!0),this.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-wistia",d&&(this.el_.parentNode.className+=" vjs-wistia-mobile"),h.isApiReady?this.initWistiaPlayer():h.apiReadyQueue.push(this))}.bind(this))}dispose(){if(this.wistiaPlayer)this.wistiaPlayer&&(this.wistiaPlayer.pause(),this.wistiaPlayer.remove());else{var e=h.apiReadyQueue.indexOf(this);-1!==e&&h.apiReadyQueue.splice(e,1)}this.wistiaPlayer=null,this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-wistia","").replace(" vjs-wistia-mobile",""),this.el_.parentNode.removeChild(this.el_)}createEl(){var e=document.createElement("div");e.setAttribute("id",this.options_.techId),e.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute"),e.setAttribute("class","vjs-tech "+this.options_.playback_css_class);var t=document.createElement("div");return t.appendChild(e),t}initWistiaPlayer(){var e={controlsVisibleOnLoad:!1,chromeless:!0,playbar:!1,playButton:!1,settingsControl:!1,smallPlayButton:!1,volumeControl:!1,videoFoam:!1,fullscreenButton:!1,preload:!0,doNotTrack:!0,autoPlay:!1};void 0!==this.options_.videoFoam&&(e.videoFoam=this.options_.videoFoam),void 0!==this.options_.source&&(this.videoId=this.options_.source.src),void 0!==this.options_.autoplay&&(e.autoPlay=this.options_.autoplay,e.muted=this.options_.autoplay);var t=this;window._wq=window._wq||[],_wq.push({id:this.videoId,options:e,onReady:function(e){t.wistiaPlayer=e,t.onPlayerReady(),t.wistiaPlayer.bind("end",t.onPlaybackEnded.bind(t))}})}onPlayerReady(){this.options_.muted&&this.wistiaPlayer.mute(),this.playerReady_=!0,this.triggerReady(),this.playOnReady&&this.play()}onPlaybackEnded(){this.trigger("ended")}src(e){return e&&this.setSrc({src:e}),this.source}setSrc(e){e&&e.src&&(delete this.errorName,this.source=e,this.options_.autoplay&&!d&&(this.isReady_?this.play():this.playOnReady=!0))}autoplay(){return this.options_.autoplay}setAutoplay(e){this.options_.autoplay=e}loop(){return this.options_.loop}setLoop(e){this.options_.loop=e}play(){this.videoId&&(this.isReady_?(this.wistiaPlayer.play(),this.trigger("play")):(this.trigger("waiting"),this.playOnReady=!0))}pause(){this.wistiaPlayer&&(this.wistiaPlayer.pause(),this.trigger("pause"))}paused(){if(this.wistiaPlayer)return"paused"===this.wistiaPlayer.state()||"ended"===this.wistiaPlayer.state()}currentTime(){if(this.wistiaPlayer)return this.wistiaPlayer.time()}setCurrentTime(e){this.wistiaPlayer&&this.wistiaPlayer.time(e)}duration(){if(this.wistiaPlayer)return this.wistiaPlayer.duration()}currentSrc(){return this.source&&this.source.src}ended(){if(this.wistiaPlayer)return"ended"===this.wistiaPlayer.state()}volume(){if(this.wistiaPlayer)return this.wistiaPlayer.volume()}setVolume(e){this.wistiaPlayer&&(this.wistiaPlayer.volume(e),this.trigger("volumechange"))}muted(){if(this.wistiaPlayer)return this.wistiaPlayer.isMuted()}setMuted(e){this.wistiaPlayer&&(!0===e?this.wistiaPlayer.mute():this.wistiaPlayer.unmute(),this.trigger("volumechange"))}supportsFullScreen(){return!0}}h.isSupported=function(){return!0},h.canPlaySource=function(e){return h.canPlayType(e.type)},h.canPlayType=function(e){return"video/wistia"===e},h.apiReadyQueue=[],"undefined"!=typeof document&&(a="//fast.wistia.com/assets/external/E-v1.js",r=function(){h.isApiReady=!0;for(var e=0;e<h.apiReadyQueue.length;++e)h.apiReadyQueue[e].initWistiaPlayer()},o=!1,n=document.createElement("script"),(l=document.getElementsByTagName("script")[0])&&(l.parentNode.insertBefore(n,l),n.onload=function(){o||(o=!0,r())},n.onreadystatechange=function(){o||"complete"!==this.readyState&&"loaded"!==this.readyState||(o=!0,r())},n.src=a),t=".vjs-wistia-mobile .vjs-big-play-button { display: none; }",i=document.head||document.getElementsByTagName("head")[0],(s=document.createElement("style")).type="text/css",s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t)),i.appendChild(s)),void 0!==e.registerTech?e.registerTech("Wistia",h):e.registerComponent("Wistia",h)});
